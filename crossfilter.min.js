(function(r){function n(r){return r}function t(r,n){for(var t=0,e=n.length,u=Array(e);e>t;++t)u[t]=r[n[t]];return u}function e(r){function n(n,t,e,u){for(;u>e;){var f=e+u>>>1,o=r(n[f]);o>=t||!(o>=o)?u=f:e=f+1}return e}function t(n,t,e,u){for(;u>e;){var f=e+u>>>1,o=r(n[f]);o>t||!(o>=o)?u=f:e=f+1}return e}return t.right=t,t.left=n,t}function u(r){function n(r,n,t){for(var u=t-n,f=(u>>>1)+1;--f>0;)e(r,f,u,n);return r}function t(r,n,t){for(var u,f=t-n;--f>0;)u=r[n],r[n]=r[n+f],r[n+f]=u,e(r,1,f,n);return r}function e(n,t,e,u){for(var f,o=n[--u+t],i=r(o);e>=(f=t<<1)&&(e>f&&r(n[u+f])>r(n[u+f+1])&&f++,!(r(n[u+f])>=i));)n[u+t]=n[u+f],t=f;n[u+t]=o}return n.sort=t,n}function f(r){function n(n,e,u,f){var o,i,a,c,l=Array(f=Math.min(u-e,f));for(i=0;f>i;++i)l[i]=n[e++];if(t(l,0,f),u>e){o=r(l[0]);do(a=r(c=n[e])>o)&&(l[0]=c,o=r(t(l,0,f)[0]));while(u>++e)}return l}var t=u(r);return n}function o(r){function n(n,t,e){for(var u=t+1;e>u;++u){for(var f,o=u,i=n[u],a=r(i);o>t&&((f=r(n[o-1]))>a||!(f>=f));--o)n[o]=n[o-1];n[o]=i}return n}return n}function i(r){function n(r,n,u){return(U>u-n?e:t)(r,n,u)}function t(t,e,u){for(var f,o;u>e&&(f=r(t[u-1]),!(f>=f));)u--;for(var i=u;--i>=e;)f=r(o=t[i]),f>=f||(t[i]=t[--u],t[u]=o);var a,c=0|(u-e)/6,l=e+c,v=u-1-c,h=e+u-1>>1,s=h-c,d=h+c,g=t[l],p=r(g),y=t[s],m=r(y),b=t[h],A=r(b),k=t[d],x=r(k),w=t[v],O=r(w);p>m&&(a=g,g=y,y=a,a=p,p=m,m=a),x>O&&(a=k,k=w,w=a,a=x,x=O,O=a),p>A&&(a=g,g=b,b=a,a=p,p=A,A=a),m>A&&(a=y,y=b,b=a,a=m,m=A,A=a),p>x&&(a=g,g=k,k=a,a=p,p=x,x=a),A>x&&(a=b,b=k,k=a,a=A,A=x,x=a),m>O&&(a=y,y=w,w=a,a=m,m=O,O=a),m>A&&(a=y,y=b,b=a,a=m,m=A,A=a),x>O&&(a=k,k=w,w=a,a=x,x=O,O=a);var E=y,M=m,U=k,z=x;t[l]=g,t[s]=t[e],t[h]=b,t[d]=t[u-1],t[v]=w;var N=e+1,C=u-2,S=z>=M&&M>=z;if(S)for(var q=N;C>=q;++q){var R=t[q],j=r(R);if(M>j)q!==N&&(t[q]=t[N],t[N]=R),++N;else if(j>M)for(;;){var B=r(t[C]);{if(!(B>M)){if(M>B){t[q]=t[N],t[N++]=t[C],t[C--]=R;break}t[q]=t[C],t[C--]=R;break}C--}}}else for(var q=N;C>=q;q++){var R=t[q],j=r(R);if(M>j)q!==N&&(t[q]=t[N],t[N]=R),++N;else if(j>z)for(;;){var B=r(t[C]);{if(!(B>z)){M>B?(t[q]=t[N],t[N++]=t[C],t[C--]=R):(t[q]=t[C],t[C--]=R);break}if(C--,q>C)break}}}if(t[e]=t[N-1],t[N-1]=E,t[u-1]=t[C+1],t[C+1]=U,n(t,e,N-1),n(t,C+2,u),S)return t;if(l>N&&C>v){for(var D,B;M>=(D=r(t[N]))&&D>=M;)++N;for(;z>=(B=r(t[C]))&&B>=z;)--C;for(var q=N;C>=q;q++){var R=t[q],j=r(R);if(M>=j&&j>=M)q!==N&&(t[q]=t[N],t[N]=R),N++;else if(z>=j&&j>=z)for(;;){var B=r(t[C]);{if(!(z>=B&&B>=z)){M>B?(t[q]=t[N],t[N++]=t[C],t[C--]=R):(t[q]=t[C],t[C--]=R);break}if(C--,q>C)break}}}}return n(t,N,C+1)}var e=o(r);return n}function a(r){return Array(r)}function c(r,n){return function(t){var e=t.length;return[r.left(t,n,0,e),r.right(t,n,0,e)]}}function l(r,n){var t=n[0],e=n[1];return function(n){var u=n.length;return[r.left(n,t,0,u),r.left(n,e,0,u)]}}function v(r){return[0,r.length]}function h(){return null}function s(){return 0}function d(r){return r+1}function g(r){return r-1}function p(r){return function(n,t){return n+ +r(t)}}function y(r){return function(n,t){return n-r(t)}}function m(){function r(r){var n=O,t=r.length;return t&&(w=w.concat(r),U=S(U,O+=t),C.forEach(function(e){e(r,n,t)})),m}function e(r){function e(n,e,u){K=n.map(r),L=V(A(u),0,u),K=t(K,L);var f,o=W(K),i=o[0],a=o[1];for(f=0;i>f;++f)U[L[f]+e]|=Q;for(f=a;u>f;++f)U[L[f]+e]|=Q;if(!e)return I=K,J=L,Z=i,$=a,void 0;var c=I,l=J,v=0,h=0;for(I=Array(O),J=b(O,O),f=0;e>v&&u>h;++f)c[v]<K[h]?(I[f]=c[v],J[f]=l[v++]):(I[f]=K[h],J[f]=L[h++]+e);for(;e>v;++v,++f)I[f]=c[v],J[f]=l[v];for(;u>h;++h,++f)I[f]=K[h],J[f]=L[h]+e;o=W(I),Z=o[0],$=o[1]}function o(r,n,t){X.forEach(function(r){r(K,L,n,t)}),K=L=null}function a(r){var n,t,e,u=r[0],f=r[1],o=[],i=[];if(Z>u)for(n=u,t=Math.min(Z,f);t>n;++n)U[e=J[n]]^=Q,o.push(e);else if(u>Z)for(n=Z,t=Math.min(u,$);t>n;++n)U[e=J[n]]^=Q,i.push(e);if(f>$)for(n=Math.max(u,$),t=f;t>n;++n)U[e=J[n]]^=Q,o.push(e);else if($>f)for(n=Math.max(Z,f),t=$;t>n;++n)U[e=J[n]]^=Q,i.push(e);return Z=u,$=f,N.forEach(function(r){r(Q,o,i)}),P}function m(r){return null==r?j():Array.isArray(r)?R(r):z(r)}function z(r){return a((W=c(x,r))(I))}function R(r){return a((W=l(x,r))(I))}function j(){return a((W=v)(I))}function B(r){for(var n,t=[],e=$;--e>=Z&&r>0;)U[n=J[e]]||(t.push(w[n]),--r);return t}function D(r){for(var n,t=[],e=Z;$>e&&r>0;)U[n=J[e]]||(t.push(w[n]),--r),e++;return t}function F(r){function t(n,t,u,f){function c(){++P===L&&(m=q(m,K<<=1),j=q(j,K),L=k(K))}var l,v,s,d,g,p,y=R,m=b(P,L),A=F,x=H,E=P,M=0,z=0;for(Z&&(A=x=h),R=Array(P),P=0,j=E>1?S(j,O):b(O,L),E&&(s=(v=y[0]).key),d=r(n[z]);f>z;){for(v&&d>=s?(g=v,p=s,m[M]=P,(v=y[++M])&&(s=v.key)):(g={key:d,value:x()},p=d),R[P]=g;!(!(p>=d)&&(d>=d||p>=p)||(j[l=t[z]+u]=P,U[l]&T||(g.value=A(g.value,w[l])),++z>=f));)d=r(n[z]);c()}for(;E>M;)R[m[M]=P]=y[M++],c();if(P>M)for(M=0;u>M;++M)j[M]=m[j[M]];l=N.indexOf(V),P>1?(V=e,W=i):(1===P?(V=o,W=a):(V=h,W=h),j=null),N[l]=V}function e(r,n,t){if(r!==Q&&!Z){if(!G&&t.length)return Z=!0,void 0;var e,u,f,o;for(e=0,f=n.length;f>e;++e)U[u=n[e]]&T||(o=R[j[u]],o.value=F(o.value,w[u]));for(e=0,f=t.length;f>e;++e)(U[u=t[e]]&T)===r&&(o=R[j[u]],o.value=G(o.value,w[u]))}}function o(r,n,t){if(r!==Q&&!Z){if(!G&&t.length)return Z=!0,void 0;var e,u,f,o=R[0];for(e=0,f=n.length;f>e;++e)U[u=n[e]]&T||(o.value=F(o.value,w[u]));for(e=0,f=t.length;f>e;++e)(U[u=t[e]]&T)===r&&(o.value=G(o.value,w[u]))}}function i(){var r,n;for(r=0;P>r;++r)R[r].value=H();for(r=0;O>r;++r)U[r]&T||(n=R[j[r]],n.value=F(n.value,w[r]))}function a(){var r,n=R[0];for(n.value=H(),r=0;O>r;++r)U[r]&T||(n.value=F(n.value,w[r]))}function c(){return Z&&(W(),Z=!1),R}function l(r){var n=B(c(),0,R.length,r);return D.sort(n,0,n.length)}function v(r,n,t){return F=r,G=n,H=t,Z=!0,C}function m(){return v(d,g,s)}function A(r){return v(p(r),y(r),s)}function x(r){function n(n){return r(n.value)}return B=f(n),D=u(n),C}function E(){return x(n)}function M(){return P}function z(){var r=N.indexOf(V);return r>=0&&N.splice(r,1),r=X.indexOf(t),r>=0&&X.splice(r,1),C}var C={top:l,all:c,reduce:v,reduceCount:m,reduceSum:A,order:x,orderNatural:E,size:M,remove:z};Y.push(C);var R,j,B,D,F,G,H,K=8,L=k(K),P=0,V=h,W=h,Z=!0;return 1>arguments.length&&(r=n),N.push(V),X.push(t),t(I,J,0,O),m().orderNatural()}function G(){var r=F(h),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function H(){Y.forEach(function(r){r.remove()});var r=C.indexOf(e);for(r>=0&&C.splice(r,1),r=C.indexOf(o),r>=0&&C.splice(r,1),r=0;O>r;++r)U[r]&=T;return E&=T,P}var I,J,K,L,P={filter:m,filterExact:z,filterRange:R,filterAll:j,top:B,bottom:D,group:F,groupAll:G,remove:H},Q=~E&-~E,T=~Q,V=i(function(r){return K[r]}),W=v,X=[],Y=[],Z=0,$=0;return C.unshift(e),C.push(o),E|=Q,(M>=32?!Q:E&(1<<M)-1)&&(U=q(U,M<<=1)),e(w,0,O),o(w,0,O),P}function o(){function r(r,n){var t;if(!m)for(t=n;O>t;++t)U[t]||(a=c(a,w[t]))}function n(r,n,t){var e,u,f;if(!m){if(!l&&t.length)return m=!0,void 0;for(e=0,f=n.length;f>e;++e)U[u=n[e]]||(a=c(a,w[u]));for(e=0,f=t.length;f>e;++e)U[u=t[e]]===r&&(a=l(a,w[u]))}}function t(){var r;for(a=v(),r=0;O>r;++r)U[r]||(a=c(a,w[r]))}function e(r,n,t){return c=r,l=n,v=t,m=!0,h}function u(){return e(d,g,s)}function f(r){return e(p(r),y(r),s)}function o(){return m&&(t(),m=!1),a}function i(){var t=N.indexOf(n);return t>=0&&N.splice(t),t=C.indexOf(r),t>=0&&C.splice(t),h}var a,c,l,v,h={reduce:e,reduceCount:u,reduceSum:f,value:o,remove:i},m=!0;return N.push(n),C.push(r),r(w,0,O),u()}function a(){return O}var m={add:r,dimension:e,groupAll:o,size:a},w=[],O=0,E=0,M=8,U=z(0),N=[],C=[];return arguments.length?r(arguments[0]):m}function b(r,n){return(257>n?z:65537>n?N:C)(r)}function A(r){for(var n=b(r,r),t=-1;r>++t;)n[t]=t;return n}function k(r){return 8===r?256:16===r?65536:4294967296}m.version="1.1.2",m.permute=t;var x=m.bisect=e(n);x.by=e;var w=m.heap=u(n);w.by=u;var O=m.heapselect=f(n);O.by=f;var E=m.insertionsort=o(n);E.by=o;var M=m.quicksort=i(n);M.by=i;var U=32,z=a,N=a,C=a,S=n,q=n;"undefined"!=typeof Uint8Array&&(z=function(r){return new Uint8Array(r)},N=function(r){return new Uint16Array(r)},C=function(r){return new Uint32Array(r)},S=function(r,n){var t=new r.constructor(n);return t.set(r),t},q=function(r,n){var t;switch(n){case 16:t=N(r.length);break;case 32:t=C(r.length);break;default:throw Error("invalid array width!")}return t.set(r),t}),r.crossfilter=m})(this);