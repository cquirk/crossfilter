(function(r){function n(r){return r}function t(r,n){for(var t=0,e=n.length,u=Array(e);e>t;++t)u[t]=r[n[t]];return u}function e(r){function n(n,t,e,u){for(;u>e;){var f=e+u>>>1,o=r(n[f]);o>=t||!(o>=o)?u=f:e=f+1}return e}function t(n,t,e,u){for(;u>e;){var f=e+u>>>1,o=r(n[f]);o>t||!(o>=o)?u=f:e=f+1}return e}return t.right=t,t.left=n,t}function u(r){function n(r,n,t){for(var u=t-n,f=(u>>>1)+1;--f>0;)e(r,f,u,n);return r}function t(r,n,t){for(var u,f=t-n;--f>0;)u=r[n],r[n]=r[n+f],r[n+f]=u,e(r,1,f,n);return r}function e(n,t,e,u){for(var f,o=n[--u+t],i=r(o);e>=(f=t<<1)&&(e>f&&r(n[u+f])>r(n[u+f+1])&&f++,!(r(n[u+f])>=i));)n[u+t]=n[u+f],t=f;n[u+t]=o}return n.sort=t,n}function f(r){function n(n,e,u,f){var o,i,a,c,l=Array(f=Math.min(u-e,f));for(i=0;f>i;++i)l[i]=n[e++];if(t(l,0,f),u>e){o=r(l[0]);do(a=r(c=n[e])>o)&&(l[0]=c,o=r(t(l,0,f)[0]));while(u>++e)}return l}var t=u(r);return n}function o(r){function n(n,t,e){for(var u=t+1;e>u;++u){for(var f,o=u,i=n[u],a=r(i);o>t&&((f=r(n[o-1]))>a||!(f>=f));--o)n[o]=n[o-1];n[o]=i}return n}return n}function i(r){function n(r,n,u){return(U>u-n?e:t)(r,n,u)}function t(t,e,u){for(var f,o;u>e&&!(f>=(f=r(t[u-1])));)u--;for(var i=u;--i>=e;)f=r(o=t[i]),f>=f||(t[i]=t[--u],t[u]=o);var a,c=0|(u-e)/6,l=e+c,v=u-1-c,s=e+u-1>>1,h=s-c,d=s+c,g=t[l],p=r(g),y=t[h],m=r(y),b=t[s],A=r(b),k=t[d],w=r(k),x=t[v],E=r(x);p>m&&(a=g,g=y,y=a,a=p,p=m,m=a),w>E&&(a=k,k=x,x=a,a=w,w=E,E=a),p>A&&(a=g,g=b,b=a,a=p,p=A,A=a),m>A&&(a=y,y=b,b=a,a=m,m=A,A=a),p>w&&(a=g,g=k,k=a,a=p,p=w,w=a),A>w&&(a=b,b=k,k=a,a=A,A=w,w=a),m>E&&(a=y,y=x,x=a,a=m,m=E,E=a),m>A&&(a=y,y=b,b=a,a=m,m=A,A=a),w>E&&(a=k,k=x,x=a,a=w,w=E,E=a);var M=y,O=m,U=k,z=w;t[l]=g,t[h]=t[e],t[s]=b,t[d]=t[u-1],t[v]=x;var N=e+1,C=u-2,S=z>=O&&O>=z;if(S)for(var q=N;C>=q;++q){var R=t[q],j=r(R);if(O>j)q!==N&&(t[q]=t[N],t[N]=R),++N;else if(j>O)for(;;){var B=r(t[C]);{if(!(B>O)){if(O>B){t[q]=t[N],t[N++]=t[C],t[C--]=R;break}t[q]=t[C],t[C--]=R;break}C--}}}else for(var q=N;C>=q;q++){var R=t[q],j=r(R);if(O>j)q!==N&&(t[q]=t[N],t[N]=R),++N;else if(j>z)for(;;){var B=r(t[C]);{if(!(B>z)){O>B?(t[q]=t[N],t[N++]=t[C],t[C--]=R):(t[q]=t[C],t[C--]=R);break}if(C--,q>C)break}}}if(t[e]=t[N-1],t[N-1]=M,t[u-1]=t[C+1],t[C+1]=U,n(t,e,N-1),n(t,C+2,u),S)return t;if(l>N&&C>v){for(var D,B;O>=(D=r(t[N]))&&D>=O;)++N;for(;z>=(B=r(t[C]))&&B>=z;)--C;for(var q=N;C>=q;q++){var R=t[q],j=r(R);if(O>=j&&j>=O)q!==N&&(t[q]=t[N],t[N]=R),N++;else if(z>=j&&j>=z)for(;;){var B=r(t[C]);{if(!(z>=B&&B>=z)){O>B?(t[q]=t[N],t[N++]=t[C],t[C--]=R):(t[q]=t[C],t[C--]=R);break}if(C--,q>C)break}}}}return n(t,N,C+1)}var e=o(r);return n}function a(r){return Array(r)}function c(r,n){return function(t){var e=t.length;return[r.left(t,n,0,e),r.right(t,n,0,e)]}}function l(r,n){var t=n[0],e=n[1];return function(n){var u=n.length;return[r.left(n,t,0,u),r.left(n,e,0,u)]}}function v(r){return[0,r.length]}function s(){return null}function h(){return 0}function d(r){return r+1}function g(r){return r-1}function p(r){return function(n,t){return n+ +r(t)}}function y(r){return function(n,t){return n-r(t)}}function m(){function r(r){var n=E,t=r.length;return t&&(x=x.concat(r),U=S(U,E+=t),C.forEach(function(e){e(r,n,t)})),m}function e(r){function e(n,e,u){J=n.map(r),K=T(A(u),0,u),J=t(J,K);var f,o=V(J),i=o[0],a=o[1];for(f=0;i>f;++f)U[K[f]+e]|=P;for(f=a;u>f;++f)U[K[f]+e]|=P;if(!e)return H=J,I=K,X=i,Y=a,void 0;var c=H,l=I,v=0,s=0;for(H=Array(E),I=b(E,E),f=0;e>v&&u>s;++f)c[v]<J[s]?(H[f]=c[v],I[f]=l[v++]):(H[f]=J[s],I[f]=K[s++]+e);for(;e>v;++v,++f)H[f]=c[v],I[f]=l[v];for(;u>s;++s,++f)H[f]=J[s],I[f]=K[s]+e;o=V(H),X=o[0],Y=o[1]}function o(r,n,t){W.forEach(function(r){r(J,K,n,t)}),J=K=null}function a(r){var n,t,e,u=r[0],f=r[1],o=[],i=[];if(X>u)for(n=u,t=Math.min(X,f);t>n;++n)U[e=I[n]]^=P,o.push(e);else if(u>X)for(n=X,t=Math.min(u,Y);t>n;++n)U[e=I[n]]^=P,i.push(e);if(f>Y)for(n=Math.max(u,Y),t=f;t>n;++n)U[e=I[n]]^=P,o.push(e);else if(Y>f)for(n=Math.max(X,f),t=Y;t>n;++n)U[e=I[n]]^=P,i.push(e);return X=u,Y=f,N.forEach(function(r){r(P,o,i)}),L}function m(r){return null==r?j():Array.isArray(r)?R(r):z(r)}function z(r){return a((V=c(w,r))(H))}function R(r){return a((V=l(w,r))(H))}function j(){return a((V=v)(H))}function B(r){for(var n,t=[],e=Y;--e>=X&&r>0;)U[n=I[e]]||(t.push(x[n]),--r);return t}function D(r){for(var n,t=[],e=X;Y>e&&r>0;)U[n=I[e]]||(t.push(x[n]),--r),e++;return t}function F(r){function t(n,t,u,f){function c(){++T===L&&(m=q(m,K<<=1),R=q(R,K),L=k(K))}var l,v,h,d,g,p,y=C,m=b(T,L),A=D,w=G,M=T,O=0,z=0;for(Y&&(A=w=s),C=Array(T),T=0,R=M>1?S(R,E):b(E,L),M&&(h=(v=y[0]).key),d=r(n[z]);f>z;){for(v&&d>=h?(g=v,p=h,m[O]=T,(v=y[++O])&&(h=v.key)):(g={key:d,value:w()},p=d),C[T]=g;!(!(p>=d)&&(d>=d||p>=p)||(R[l=t[z]+u]=T,U[l]&Q||(g.value=A(g.value,x[l])),++z>=f));)d=r(n[z]);c()}for(;M>O;)C[m[O]=T]=y[O++],c();if(T>O)for(O=0;u>O;++O)R[O]=m[R[O]];l=N.indexOf(V),T>1?(V=e,X=i):(1===T?(V=o,X=a):(V=s,X=s),R=null),N[l]=V}function e(r,n,t){if(r!==P&&!Y){var e,u,f,o;for(e=0,f=n.length;f>e;++e)U[u=n[e]]&Q||(o=C[R[u]],o.value=D(o.value,x[u]));for(e=0,f=t.length;f>e;++e)(U[u=t[e]]&Q)===r&&(o=C[R[u]],o.value=F(o.value,x[u]))}}function o(r,n,t){if(r!==P&&!Y){var e,u,f,o=C[0];for(e=0,f=n.length;f>e;++e)U[u=n[e]]&Q||(o.value=D(o.value,x[u]));for(e=0,f=t.length;f>e;++e)(U[u=t[e]]&Q)===r&&(o.value=F(o.value,x[u]))}}function i(){var r,n;for(r=0;T>r;++r)C[r].value=G();for(r=0;E>r;++r)U[r]&Q||(n=C[R[r]],n.value=D(n.value,x[r]))}function a(){var r,n=C[0];for(n.value=G(),r=0;E>r;++r)U[r]&Q||(n.value=D(n.value,x[r]))}function c(){return Y&&(X(),Y=!1),C}function l(r){var n=j(c(),0,C.length,r);return B.sort(n,0,n.length)}function v(r,n,t){return D=r,F=n,G=t,Y=!0,J}function m(){return v(d,g,h)}function A(r){return v(p(r),y(r),h)}function w(r){function n(n){return r(n.value)}return j=f(n),B=u(n),J}function M(){return w(n)}function O(){return T}function z(){var r=N.indexOf(V);return r>=0&&N.splice(r,1),r=W.indexOf(t),r>=0&&W.splice(r,1),J}var C,R,j,B,D,F,G,J={top:l,all:c,reduce:v,reduceCount:m,reduceSum:A,order:w,orderNatural:M,size:O,remove:z},K=8,L=k(K),T=0,V=s,X=s,Y=!0;return 1>arguments.length&&(r=n),N.push(V),W.push(t),t(H,I,0,E),m().orderNatural()}function G(){var r=F(s),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}var H,I,J,K,L={filter:m,filterExact:z,filterRange:R,filterAll:j,top:B,bottom:D,group:F,groupAll:G},P=1<<M++,Q=~P,T=i(function(r){return J[r]}),V=v,W=[],X=0,Y=0;return C.unshift(e),C.push(o),M>O&&(U=q(U,O<<=1)),e(x,0,E),o(x,0,E),L}function o(){function r(r,n){var t;if(!m)for(t=n;E>t;++t)U[t]||(a=c(a,x[t]))}function n(r,n,t){var e,u,f;if(!m){for(e=0,f=n.length;f>e;++e)U[u=n[e]]||(a=c(a,x[u]));for(e=0,f=t.length;f>e;++e)U[u=t[e]]===r&&(a=l(a,x[u]))}}function t(){var r;for(a=v(),r=0;E>r;++r)U[r]||(a=c(a,x[r]))}function e(r,n,t){return c=r,l=n,v=t,m=!0,s}function u(){return e(d,g,h)}function f(r){return e(p(r),y(r),h)}function o(){return m&&(t(),m=!1),a}function i(){var t=N.indexOf(n);return t>=0&&N.splice(t),t=C.indexOf(r),t>=0&&C.splice(t),s}var a,c,l,v,s={reduce:e,reduceCount:u,reduceSum:f,value:o,remove:i},m=!0;return N.push(n),C.push(r),r(x,0,E),u()}function a(){return E}var m={add:r,dimension:e,groupAll:o,size:a},x=[],E=0,M=0,O=8,U=z(0),N=[],C=[];return arguments.length?r(arguments[0]):m}function b(r,n){return(257>n?z:65537>n?N:C)(r)}function A(r){for(var n=b(r,r),t=-1;r>++t;)n[t]=t;return n}function k(r){return 8===r?256:16===r?65536:4294967296}m.version="1.1.1",m.permute=t;var w=m.bisect=e(n);w.by=e;var x=m.heap=u(n);x.by=u;var E=m.heapselect=f(n);E.by=f;var M=m.insertionsort=o(n);M.by=o;var O=m.quicksort=i(n);O.by=i;var U=32,z=a,N=a,C=a,S=n,q=n;"undefined"!=typeof Uint8Array&&(z=function(r){return new Uint8Array(r)},N=function(r){return new Uint16Array(r)},C=function(r){return new Uint32Array(r)},S=function(r,n){var t=new r.constructor(n);return t.set(r),t},q=function(r,n){var t;switch(n){case 16:t=N(r.length);break;case 32:t=C(r.length);break;default:throw Error("invalid array width!")}return t.set(r),t}),r.crossfilter=m})(this);